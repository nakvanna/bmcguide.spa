(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"10c5":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"q-pa-md"},[t.locations.length?e("div",[e("q-list",{staticClass:"q-pa-lg rounded-borders",attrs:{bordered:""}},[e("q-item-label",{attrs:{header:""}},[t._v("List of Items")]),t._l(t.locations,(function(a,o){return e("q-item",{key:o},[e("q-item-section",{attrs:{avatar:"",top:""}},[e("q-avatar",{attrs:{size:"75px"}},[e("img",{attrs:{src:a.thumbnail}})])],1),e("q-item-section",{attrs:{top:""}},[e("q-item-label",{attrs:{lines:"1"}},[e("span",{staticClass:"text-weight-medium"},[t._v(t._s(a.name))]),e("span",{staticClass:"text-grey-8"},[t._v(" "+t._s(a.sub_category))])]),e("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v("\n            "+t._s(a.category)+"\n          ")]),e("q-item-label",{staticClass:"q-mt-xs text-body2 text-weight-bold text-primary text-uppercase",attrs:{lines:"1"}},[e("span",{staticClass:"cursor-pointer",on:{click:function(e){return t.$refs.location_view.showDialog(a)}}},[t._v("Read more...")])])],1),e("q-item-section",{attrs:{top:"",side:""}},[e("div",{staticClass:"text-grey-8 q-gutter-xs"},[e("q-btn",{staticClass:"gt-xs",attrs:{color:"primary",size:"18px",flat:"",dense:"",round:"",icon:"edit"},on:{click:function(e){return t.$refs.location_edit.showDialog(a)}}}),e("q-btn",{staticClass:"gt-xs",attrs:{size:"18px",color:"red",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(e){return t.comfirmLocation(a.id,o,a.gallery)}}})],1)])],1)}))],2),e("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[e("q-btn",{attrs:{fab:"",icon:"add",color:"primary"},on:{click:function(a){return t.$refs.location_add.showDialog()}}})],1)],1):e("div",[e("q-page",{staticClass:"flex flex-center"},[e("h5",{staticClass:"text-grey-6 text-bold"},[t._v("No data!")]),e("q-btn",{staticClass:"text-primary",attrs:{flat:""},on:{click:function(a){return t.$refs.location_add.showDialog()}}},[t._v("Add New")])],1)],1),e("location-add",{ref:"location_add"}),e("location-edit",{ref:"location_edit"}),e("location-view",{ref:"location_view"}),e("q-dialog",{model:{value:t.alert,callback:function(a){t.alert=a},expression:"alert"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6 text-negative"},[t._v("Delete comfirm!")])]),e("q-card-section",{staticClass:"q-pt-none"},[t._v("Are you sure?")]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No",color:"primary"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Yes",color:"negative"},on:{click:t.deleteLocation}})],1)],1)],1)],1)},l=[],s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{attrs:{"full-width":"",persistent:""},model:{value:t.show_dialog,callback:function(a){t.show_dialog=a},expression:"show_dialog"}},[e("q-card",[e("q-bar",[e("div",{staticClass:"text-h6"},[t._v("Add New Things to Do")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close",color:"negative"}},[e("q-tooltip",[t._v("Close")])],1)],1),e("q-card-section",{staticClass:"q-pt-none"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.storeLocation,reset:t.onReset}},[e("div",{staticClass:"row q-pa-md q-gutter-sm"},[e("div",{staticClass:"col"},[e("q-select",{attrs:{"bottom-slots":"",options:t.categories,label:"Category","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please select something"}]},on:{input:t.clearSubCate},model:{value:t.locations.category,callback:function(a){t.$set(t.locations,"category",a)},expression:"locations.category"}})],1),e("div",{staticClass:"col"},[e("q-select",{attrs:{"bottom-slots":"",options:t.subCategories,label:"Subcategory","lazy-rules":"",rules:[function(t){return!!t||"Please select something"}]},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:function(a){return a.stopPropagation(),t.$refs.add_travel_category.showDialog()}}})]},proxy:!0}]),model:{value:t.locations.sub_category,callback:function(a){t.$set(t.locations,"sub_category",a)},expression:"locations.sub_category"}})],1)]),e("div",{staticClass:"row q-pa-md q-gutter-sm"},[e("div",{staticClass:"column items_center"},[e("div",{staticClass:"col"},[e("q-uploader",{ref:"featuredImage",staticClass:"full-width",staticStyle:{"max-width":"300px"},attrs:{label:"Thumbnail រូបភាពបង្ហាញ",accept:"image/*",factory:t.factoryFnThumbnail,"hide-upload-btn":"","auto-upload":""},scopedSlots:t._u([{key:"list",fn:function(a){return[e("q-list",{attrs:{separator:""}},t._l(a.files,(function(o){return e("q-item",{key:o.name},[e("q-item-section",[e("q-item-label",{staticClass:"full-width ellipsis"},[t._v(t._s(o.name))]),e("q-item-label",{attrs:{caption:""}},[t._v("Status: "+t._s(o.__status))]),e("q-item-label",{attrs:{caption:""}},[t._v(t._s(o.__sizeLabel)+" / "+t._s(o.__progressLabel))])],1),o.__img?e("q-item-section",{staticClass:"gt-xs",attrs:{thumbnail:""}},[e("img",{attrs:{src:o.__img.src}})]):t._e(),e("q-item-section",{attrs:{top:"",side:""}},[e("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(t){return a.removeFile(o)}}})],1)],1)})),1)]}}])})],1)]),e("div",{staticClass:"col"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col q-pl-md"},[e("q-input",{attrs:{label:"Location name *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.locations.name,callback:function(a){t.$set(t.locations,"name",a)},expression:"locations.name"}})],1),e("div",{staticClass:"col q-pl-md"},[e("q-input",{attrs:{label:"Location URL *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.locations.location_url,callback:function(a){t.$set(t.locations,"location_url",a)},expression:"locations.location_url"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col q-pl-md"},[e("q-input",{attrs:{label:"Website *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.locations.website,callback:function(a){t.$set(t.locations,"website",a)},expression:"locations.website"}})],1),e("div",{staticClass:"col q-pl-md"},[e("q-input",{attrs:{label:"Tel *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.locations.tel,callback:function(a){t.$set(t.locations,"tel",a)},expression:"locations.tel"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col q-pl-md"},[e("q-input",{attrs:{label:"E-mail *",type:"email","lazy-rules":"",rules:[function(t){return!!t||"Email is missing"},t.isValidEmail]},model:{value:t.locations.email,callback:function(a){t.$set(t.locations,"email",a)},expression:"locations.email"}})],1),e("div",{staticClass:"col q-pl-md"},[e("q-select",{attrs:{label:"Can do *","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something & enter"}]},on:{"new-value":t.createValue},model:{value:t.locations.can_do,callback:function(a){t.$set(t.locations,"can_do",a)},expression:"locations.can_do"}})],1)])])]),e("div",{staticClass:"row q-pa-md q-gutter-sm"},[e("div",{staticClass:"col"},[e("q-editor",{attrs:{dense:t.$q.screen.lt.md,toolbar:[[{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]},{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:t.$q.lang.editor.fontSize,icon:t.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:t.$q.lang.editor.defaultFont,icon:t.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},model:{value:t.locations.about,callback:function(a){t.$set(t.locations,"about",a)},expression:"locations.about"}})],1),e("div",{staticClass:"col-4"},[e("q-uploader",{ref:"gallery",staticClass:"full-width",attrs:{multiple:"","auto-upload":"",label:"Gallery",accept:"image/*",factory:t.factoryFnGallery},scopedSlots:t._u([{key:"list",fn:function(a){return[e("q-list",{attrs:{separator:""}},t._l(a.files,(function(o){return e("q-item",{key:o.name},[e("q-item-section",[e("q-item-label",{staticClass:"full-width ellipsis"},[t._v(t._s(o.name))]),e("q-item-label",{attrs:{caption:""}},[t._v("Status: "+t._s(o.__status))]),e("q-item-label",{attrs:{caption:""}},[t._v(t._s(o.__sizeLabel)+" / "+t._s(o.__progressLabel))])],1),o.__img?e("q-item-section",{staticClass:"gt-xs",attrs:{thumbnail:""}},[e("img",{attrs:{src:o.__img.src}})]):t._e(),e("q-item-section",{attrs:{top:"",side:""}},[e("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(t){return a.removeFile(o)}}})],1)],1)})),1)]}}])})],1)]),e("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}})],1),e("travel-category",{ref:"add_travel_category",attrs:{category:t.locations.category}})],1)],1)],1)],1)},i=[],n=(e("ac4d"),e("8a81"),e("5df3"),e("1c4c"),e("6b54"),e("ac6a"),e("cadf"),e("06db"),e("7f7f"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("q-dialog",{model:{value:t.show_dialog,callback:function(a){t.show_dialog=a},expression:"show_dialog"}},[e("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Category")])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-input",{attrs:{autofocus:"",label:"New Category","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.data.sub_category,callback:function(a){t.$set(t.data,"sub_category",a)},expression:"data.sub_category"}})],1),e("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Add"},on:{click:function(a){return t.storeSubCategory()}}})],1),e("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[e("q-item-label",{attrs:{header:""}},[t._v("List of Categories")]),t._l(t.subCategories,(function(a,o){return e("q-item",{key:o},[e("q-item-section",{attrs:{top:""}},[e("q-item-label",{staticClass:"text-black text-bold",attrs:{caption:"",lines:"1"}},[t._v(t._s(a.sub_category))])],1),e("q-item-section",{attrs:{top:"",side:""}},[e("div",{staticClass:"text-black q-gutter-xs"},[e("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(a){t.alert=!0}}})],1),e("q-dialog",{model:{value:t.alert,callback:function(a){t.alert=a},expression:"alert"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6 text-negative"},[t._v("Delete comfirm!")])]),e("q-card-section",{staticClass:"q-pt-none"},[t._v("\n                  Are you sure?\n                ")]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No",color:"primary"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Yes",color:"negative"},on:{click:function(e){return t.deleteSubCategory(a.id,o)}}})],1)],1)],1)],1)],1)}))],2)],1)],1)],1)}),r=[],c={props:["category"],data:function(){return{alert:!1,show_dialog:!1,data:{category:"",sub_category:""}}},computed:{subCategories:function(){return this.$store.state.sub_categories.sub_categories}},created:function(){},methods:{showDialog:function(){this.show_dialog=!0},storeSubCategory:function(){var t=this;this.data.category=this.category,""!=this.data.category&&this.$store.dispatch("sub_categories/storeSubCategory",this.data).then((function(a){t.data={category:"",sub_category:""}}))},deleteSubCategory:function(t,a){this.$store.dispatch("sub_categories/deleteSubCategory",{id:t,i:a})}}},u=c,d=e("2877"),m=e("eebe"),p=e.n(m),g=e("24e8"),f=e("f09f"),b=e("a370"),_=e("27f9"),y=e("4b7e"),h=e("9c40"),v=e("1c1c"),q=e("0170"),C=e("66e5"),w=e("4074"),x=e("7f67"),$=Object(d["a"])(u,n,r,!1,null,null,null),D=$.exports;function k(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=S(t))){var a=0,e=function(){};return{s:e,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l,s=!0,i=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return s=t.done,t},e:function(t){i=!0,l=t},f:function(){try{s||null==o.return||o.return()}finally{if(i)throw l}}}}function S(t,a){if(t){if("string"===typeof t)return Q(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Q(t,a):void 0}}function Q(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,o=new Array(a);e<a;e++)o[e]=t[e];return o}p()($,"components",{QDialog:g["a"],QCard:f["a"],QCardSection:b["a"],QInput:_["a"],QCardActions:y["a"],QBtn:h["a"],QList:v["a"],QItemLabel:q["a"],QItem:C["a"],QItemSection:w["a"]}),p()($,"directives",{ClosePopup:x["a"]});var z={components:{TravelCategory:D},computed:{categories:function(){return this.$store.state.categories.categories.map((function(t){return t.category}))},filteredCategory:function(){var t=this;return this.$store.state.sub_categories.sub_categories.filter((function(a){return a.category===t.locations.category}))},subCategories:function(){return this.filteredCategory.map((function(t){return{label:t.sub_category,value:t.id}}))},activeUserInfo:function(){return this.$store.state.users.AppActiveUser}},created:function(){this.$store.dispatch("sub_categories/fetchSubCategories")},data:function(){return{show_dialog:!1,locations:{user_id:"0",name:null,category:null,sub_category:null,location_url:null,thumbnail:null,website:null,tel:null,email:null,can_do:[],about:"",gallery_id:null},galleries:{location_id:null,gallery:null},formData:new FormData,galleryData:new FormData}},methods:{clearSubCate:function(){this.locations.sub_category=""},isValidEmail:function(t){var a=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return a.test(t)||"Invalid email"},showDialog:function(){this.show_dialog=!0},createValue:function(t,a){a(t,"add-unique")},storeLocation:function(){var t=this;t.formData.has("thumbnail")&&t.galleryData.has("galleries[]")?(t.formData.set("user_id",t.activeUserInfo.uid),t.formData.set("name",t.locations.name),t.formData.set("category",t.locations.category),t.formData.set("sub_category",t.locations.sub_category.label),t.formData.set("location_coord",t.locations.location_url),t.formData.set("website",t.locations.website),t.formData.set("tel",t.locations.tel),t.formData.set("email",t.locations.email),t.formData.set("can_do",t.locations.can_do),t.formData.set("about",t.locations.about),t.$q.loading.show(),t.$store.dispatch("locations/storeLocation",t.formData).then((function(a){t.galleryData.set("location_id",a.id),t.$store.dispatch("locations/storeGallery",t.galleryData).then((function(a){t.show_dialog=!1;var e,o=k(t.formData.keys());try{for(o.s();!(e=o.n()).done;){var l=e.value;t.formData.delete(l)}}catch(s){o.e(s)}finally{o.f()}t.$q.loading.hide(),t.onReset(),t.$refs.featuredImage.reset(),t.$q.loading.hide(),t.$q.notify({message:"Data was added!",position:"top",color:"positive"}),t.$refs.gallery.reset()}))}))):t.$q.notify({message:"Place add Thumbnail and Gallery",position:"bottom",color:"negative"})},factoryFnThumbnail:function(t){var a=this;a.formData.set("thumbnail",t[0]),a.locations.thumbnail=t[0]},factoryFnGallery:function(t){var a=this;a.galleryData.append("galleries[]",t[0])},onReset:function(){var t=this.locations;t.name=null,t.location_url=null,t.thumbnail=null,t.website=null,t.tel=null,t.email=null,t.can_do=null,t.about="",t.gallery_id=null,t.category=null}}},L=z,I=e("d847"),A=e("2c91"),P=e("05c0"),F=e("0378"),T=e("ddd8"),N=e("ee89"),E=e("d66b"),j=Object(d["a"])(L,s,i,!1,null,null,null),G=j.exports;p()(j,"components",{QDialog:g["a"],QCard:f["a"],QBar:I["a"],QSpace:A["a"],QBtn:h["a"],QTooltip:P["a"],QCardSection:b["a"],QForm:F["a"],QSelect:T["a"],QUploader:N["a"],QList:v["a"],QItem:C["a"],QItemSection:w["a"],QItemLabel:q["a"],QInput:_["a"],QEditor:E["a"],QCardActions:y["a"]}),p()(j,"directives",{ClosePopup:x["a"]});var U=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{attrs:{"full-width":""},model:{value:t.show_dialog,callback:function(a){t.show_dialog=a},expression:"show_dialog"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Edit Location Place")])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-form",{staticClass:"q-gutter-md",on:{submit:t.updateLocation,reset:t.onReset}},[e("div",{staticClass:"row q-pa-md q-gutter-sm"},[e("div",{staticClass:"col"},[e("q-select",{attrs:{"bottom-slots":"",options:t.categories,label:"Category","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please select something"}]},on:{input:function(a){t.locations.sub_category=null}},model:{value:t.locations.category,callback:function(a){t.$set(t.locations,"category",a)},expression:"locations.category"}})],1),e("div",{staticClass:"col"},[e("q-select",{attrs:{"bottom-slots":"",options:t.subCategories,label:"Subcategory","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please select something"}]},on:{input:function(a){t.sub_cate_on_input=!0}},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:function(a){return a.stopPropagation(),t.$refs.add_travel_category.showDialog()}}})]},proxy:!0}]),model:{value:t.locations.sub_category,callback:function(a){t.$set(t.locations,"sub_category",a)},expression:"locations.sub_category"}})],1)]),e("div",{staticClass:"row q-pa-md q-gutter-sm"},[e("div",{staticClass:"column items_center"},[e("div",{staticClass:"col"},[e("q-card",{directives:[{name:"show",rawName:"v-show",value:t.is_upload,expression:"is_upload"}],staticClass:"my-card"},[e("q-img",{attrs:{src:t.locations.thumbnail,basic:"",width:"200px"}},[e("div",{staticClass:"absolute-bottom text-h6"},[e("div",{staticClass:"row"},[e("q-btn",{attrs:{round:"",color:"primary",icon:"cloud_upload"},on:{click:function(a){t.is_upload=!t.is_upload}}})],1)])])],1),e("q-uploader",{directives:[{name:"show",rawName:"v-show",value:!t.is_upload,expression:"!is_upload"}],ref:"featuredImage",staticClass:"full-width",staticStyle:{"max-width":"300px"},attrs:{label:"Thumbnail រូបភាពបង្ហាញ",accept:"image/*",factory:t.factoryFnThumbnail,"auto-upload":""},scopedSlots:t._u([{key:"list",fn:function(a){return[e("q-list",{attrs:{separator:""}},t._l(a.files,(function(o){return e("q-item",{key:o.name},[e("q-item-section",[e("q-item-label",{staticClass:"full-width ellipsis"},[t._v(t._s(o.name))]),e("q-item-label",{attrs:{caption:""}},[t._v("Status: "+t._s(o.__status))]),e("q-item-label",{attrs:{caption:""}},[t._v(t._s(o.__sizeLabel)+" / "+t._s(o.__progressLabel))])],1),o.__img?e("q-item-section",{staticClass:"gt-xs",attrs:{thumbnail:""}},[e("img",{attrs:{src:o.__img.src}})]):t._e(),e("q-item-section",{attrs:{top:"",side:""}},[e("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(t){return a.removeFile(o)}}})],1)],1)})),1)]}}])})],1)]),e("div",{staticClass:"col"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col q-pl-md"},[e("q-input",{attrs:{label:"Shop name *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.locations.name,callback:function(a){t.$set(t.locations,"name",a)},expression:"locations.name"}})],1),e("div",{staticClass:"col q-pl-md"},[e("q-input",{attrs:{label:"Location URL *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.locations.location_url,callback:function(a){t.$set(t.locations,"location_url",a)},expression:"locations.location_url"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col q-pl-md"},[e("q-input",{attrs:{label:"Website *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.locations.website,callback:function(a){t.$set(t.locations,"website",a)},expression:"locations.website"}})],1),e("div",{staticClass:"col q-pl-md"},[e("q-input",{attrs:{label:"Tel *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.locations.tel,callback:function(a){t.$set(t.locations,"tel",a)},expression:"locations.tel"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col q-pl-md"},[e("q-input",{attrs:{label:"E-mail *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.locations.email,callback:function(a){t.$set(t.locations,"email",a)},expression:"locations.email"}})],1),e("div",{staticClass:"col q-pl-md"},[e("q-select",{attrs:{label:"Can do *","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0"},on:{"new-value":t.createValue},model:{value:t.locations.can_do,callback:function(a){t.$set(t.locations,"can_do",a)},expression:"locations.can_do"}})],1)])])]),e("div",{staticClass:"row q-pa-md q-gutter-sm"},[e("div",{staticClass:"col"},[e("q-editor",{attrs:{dense:t.$q.screen.lt.md,toolbar:[[{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]},{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:t.$q.lang.editor.fontSize,icon:t.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:t.$q.lang.editor.defaultFont,icon:t.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},model:{value:t.locations.about,callback:function(a){t.$set(t.locations,"about",a)},expression:"locations.about"}})],1),e("div",{staticClass:"col-5"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.is_gallery_upload,expression:"is_gallery_upload"}],staticClass:"q-gutter-sm row items-start"},[t._l(t.locations.gallery,(function(a,o){return e("q-img",{key:o,staticStyle:{height:"140px","max-width":"150px"},attrs:{src:a.galleries,"spinner-color":"red"}},[e("q-icon",{staticClass:"absolute all-pointer-events",staticStyle:{top:"8px",right:"8px"},attrs:{round:"",color:"red",size:"20px",name:"delete"},on:{click:function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.deleteGallery(e,a.id,a.galleries)}}})],1)})),e("q-btn",{staticStyle:{height:"140px","max-width":"150px"},attrs:{size:"70px",color:"teal",icon:"cloud_upload"},on:{click:function(a){t.is_gallery_upload=!t.is_gallery_upload}}})],2),e("q-uploader",{directives:[{name:"show",rawName:"v-show",value:!t.is_gallery_upload,expression:"!is_gallery_upload"}],ref:"gallery",staticClass:"full-width",attrs:{multiple:"","auto-upload":"",label:"Gallery",accept:"image/*",factory:t.factoryFnGallery},scopedSlots:t._u([{key:"list",fn:function(a){return[e("q-list",{attrs:{separator:""}},t._l(a.files,(function(o){return e("q-item",{key:o.name},[e("q-item-section",[e("q-item-label",{staticClass:"full-width ellipsis"},[t._v(t._s(o.name))]),e("q-item-label",{attrs:{caption:""}},[t._v("Status: "+t._s(o.__status))]),e("q-item-label",{attrs:{caption:""}},[t._v(t._s(o.__sizeLabel)+" / "+t._s(o.__progressLabel))])],1),o.__img?e("q-item-section",{staticClass:"gt-xs",attrs:{thumbnail:""}},[e("img",{attrs:{src:o.__img.src}})]):t._e(),e("q-item-section",{attrs:{top:"",side:""}},[e("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(t){return a.removeFile(o)}}})],1)],1)})),1)]}}])})],1)]),e("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Update",type:"submit",color:"primary"}})],1),e("travel-category",{ref:"add_travel_category",attrs:{category:t.locations.category}})],1)],1)],1)],1)},R=[];e("28a5");function V(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=B(t))){var a=0,e=function(){};return{s:e,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l,s=!0,i=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return s=t.done,t},e:function(t){i=!0,l=t},f:function(){try{s||null==o.return||o.return()}finally{if(i)throw l}}}}function B(t,a){if(t){if("string"===typeof t)return O(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?O(t,a):void 0}}function O(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,o=new Array(a);e<a;e++)o[e]=t[e];return o}var M={components:{TravelCategory:D},computed:{filteredCategory:function(){var t=this;return this.$store.state.sub_categories.sub_categories.filter((function(a){return a.category===t.locations.category}))},subCategories:function(){return this.filteredCategory.map((function(t){return{label:t.sub_category,value:t.id}}))},activeUserInfo:function(){return this.$store.state.users.AppActiveUser}},created:function(){this.$store.dispatch("sub_categories/fetchSubCategories")},data:function(){return{sub_cate_on_input:!1,is_upload:!0,is_gallery_upload:!0,categories:["ប្រាសាទ Temple","ព្រៃភ្នំ Mountain","សណ្ឋាគា Accommodation"],show_dialog:!1,locations:{id:null,name:null,category:null,sub_category:null,location_url:null,thumbnail:null,website:null,tel:null,email:null,can_do:null,about:"",gallery_id:"1",gallery:null},galleries:{location_id:null,gallery:null},formData:new FormData,galleryData:new FormData}},methods:{showDialog:function(t){console.log(t);var a=this.locations;this.is_upload=!0,this.is_gallery_upload=!0,a.id=t.id,a.name=t.name,a.category=t.category,a.sub_category=t.sub_category,a.location_url=t.location_coord,a.thumbnail=t.thumbnail,a.website=t.website,a.tel=t.tel,a.email=t.email,a.can_do=t.can_do.split(","),a.about=t.about,a.gallery_id=t.gallery_id,a.gallery=t.gallery,this.show_dialog=!0},createValue:function(t,a){a(t,"add-unique")},updateLocation:function(){var t=this;t.formData.set("id",t.locations.id),t.formData.set("name",t.locations.name),t.formData.set("user_id",t.activeUserInfo.uid),t.formData.set("category",t.locations.category),1==t.sub_cate_on_input?t.formData.set("sub_category",t.locations.sub_category.label):t.formData.set("sub_category",t.locations.sub_category),t.formData.set("location_coord",t.locations.location_url),t.formData.set("website",t.locations.website),t.formData.set("tel",t.locations.tel),t.formData.set("email",t.locations.email),t.formData.set("can_do",t.locations.can_do),t.formData.set("about",t.locations.about),t.formData.set("gallery_id",t.locations.gallery_id),t.$q.loading.show(),t.$store.dispatch("locations/updateLocation",t.formData).then((function(a){if(0==t.is_gallery_upload)t.galleryData.set("location_id",t.locations.id),t.$store.dispatch("locations/updateGallery",t.galleryData).then((function(a){var e,o=V(t.formData.keys());try{for(o.s();!(e=o.n()).done;){var l=e.value;t.formData.delete(l)}}catch(r){o.e(r)}finally{o.f()}var s,i=V(t.galleryData.keys());try{for(i.s();!(s=i.n()).done;){var n=s.value;t.galleryData.delete(n)}}catch(r){i.e(r)}finally{i.f()}t.$q.loading.hide(),t.onReset(),t.$refs.featuredImage.reset(),t.$q.loading.hide(),t.$q.notify({message:"Data was updated!",position:"top",color:"positive"}),t.$refs.gallery.reset(),t.show_dialog=!1}));else{var e,o=V(t.formData.keys());try{for(o.s();!(e=o.n()).done;){var l=e.value;t.formData.delete(l)}}catch(r){o.e(r)}finally{o.f()}var s,i=V(t.galleryData.keys());try{for(i.s();!(s=i.n()).done;){var n=s.value;t.galleryData.delete(n)}}catch(r){i.e(r)}finally{i.f()}t.$q.loading.hide(),t.onReset(),t.$refs.featuredImage.reset(),t.$q.loading.hide(),t.$q.notify({message:"Data was updated!",position:"top",color:"positive"}),t.$refs.gallery.reset(),t.show_dialog=!1}}))},deleteGallery:function(t,a,e){t.path[2].remove(),this.$store.dispatch("galleries/deleteGallery",{id:a,path:e})},factoryFnThumbnail:function(t){var a=this;a.formData.set("thumbnail",t[0])},factoryFnGallery:function(t){var a=this;a.galleryData.append("galleries[]",t[0])},onReset:function(){var t=this.locations;t.name=null,t.location_url=null,t.thumbnail=null,t.website=null,t.tel=null,t.email=null,t.can_do=null,t.about="",t.gallery_id=null,t.category=null}}},K=M,Z=e("068f"),W=e("0016"),J=Object(d["a"])(K,U,R,!1,null,null,null),Y=J.exports;p()(J,"components",{QDialog:g["a"],QCard:f["a"],QCardSection:b["a"],QForm:F["a"],QSelect:T["a"],QBtn:h["a"],QUploader:N["a"],QImg:Z["a"],QList:v["a"],QItem:C["a"],QItemSection:w["a"],QItemLabel:q["a"],QInput:_["a"],QEditor:E["a"],QIcon:W["a"],QCardActions:y["a"]});var H=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{attrs:{"full-width":""},model:{value:t.show_dialog,callback:function(a){t.show_dialog=a},expression:"show_dialog"}},[e("q-card",[e("q-bar",[e("div",{staticClass:"text-h6"},[t._v("View Location")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close",color:"negative"}},[e("q-tooltip",[t._v("Close")])],1)],1),e("div",{staticClass:"row q-pa-sm"},[e("div",{staticClass:"col-2"},[e("q-card",{staticClass:"width: 100% max-width: 250px"},[e("q-img",{attrs:{src:t.locations.thumbnail,basic:""}},[e("div",{staticClass:"absolute-bottom text-h6"},[t._v("Thumbnail")])])],1)],1)]),e("div",{staticClass:"col text-center"},[e("h4",[e("u",{staticClass:"text-bold"},[t._v(t._s(t.locations.name))])])]),e("q-separator"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e("ul",[e("li",{staticClass:"q-pb-md"},[t._v("Category: "),e("span",{staticClass:"text-bold"},[t._v(t._s(t.locations.category))])]),e("li",{staticClass:"q-pb-md"},[t._v("Sub Category: "),e("span",{staticClass:"text-bold"},[t._v(t._s(t.locations.sub_category))])]),e("li",{staticClass:"q-pb-md"},[t._v("Location: "),e("span",{staticClass:"text-bold"},[t._v(t._s(t.locations.location_coord))])]),e("li",{staticClass:"q-pb-md"},[t._v("Website: "),e("span",{staticClass:"text-bold"},[t._v(t._s(t.locations.website))])]),e("li",{staticClass:"q-pb-md"},[t._v("Tel: "),e("span",{staticClass:"text-bold"},[t._v(t._s(t.locations.tel))])]),e("li",{staticClass:"q-pb-md"},[t._v("E-mail: "),e("span",{staticClass:"text-bold"},[t._v(t._s(t.locations.email))])]),e("li",{staticClass:"q-pb-md"},[t._v("Can do: "),e("span",{staticClass:"text-bold"},[t._v(t._s(t.locations.can_do))])])])]),e("div",{staticClass:"col"},[e("div",{staticClass:"q-pa-md"},[e("div",{staticClass:"q-gutter-sm row items-start"},t._l(t.locations.gallery,(function(t,a){return e("q-img",{key:a,staticStyle:{height:"140px","max-width":"150px"},attrs:{src:t.galleries,"spinner-color":"red"}})})),1)])])]),e("q-separator"),e("div",{staticClass:"row q-pa-md",domProps:{innerHTML:t._s(t.locations.about)}})],1)],1)},X=[],tt={data:function(){return{show_dialog:!1,locations:{name:null,category:null,sub_category:null,location_coord:null,thumbnail:null,website:null,tel:null,email:null,can_do:null,about:"",gallery_id:"",gallery:[]}}},methods:{showDialog:function(t){console.log(t.gallery);var a=this.locations;this.show_dialog=!0,a.name=t.name,a.category=t.category,a.sub_category=t.sub_category,a.location_coord=t.location_coord,a.website=t.website,a.tel=t.tel,a.email=t.email,a.can_do=t.can_do,a.about=t.about,a.thumbnail=t.thumbnail,a.gallery=t.gallery}}},at=tt,et=e("eb85"),ot=Object(d["a"])(at,H,X,!1,null,null,null),lt=ot.exports;p()(ot,"components",{QDialog:g["a"],QCard:f["a"],QBar:I["a"],QSpace:A["a"],QBtn:h["a"],QTooltip:P["a"],QImg:Z["a"],QSeparator:et["a"]}),p()(ot,"directives",{ClosePopup:x["a"]});var st={components:{LocationAdd:G,LocationView:lt,LocationEdit:Y},computed:{locations:function(){return this.$store.state.locations.locations}},created:function(){},data:function(){return{alert:!1,deleteData:{id:null,i:null,gallery:[]}}},methods:{comfirmLocation:function(t,a,e){this.alert=!0,this.deleteData.id=t,this.deleteData.i=a,this.deleteData.gallery=e},deleteLocation:function(){var t=this;t.$store.dispatch("locations/deleteLocation",t.deleteData).then((function(a){if(1==a)for(var e=0;e<t.deleteData.gallery.length;e++)t.$store.dispatch("galleries/deleteGallery",{id:t.deleteData.gallery[e].id,path:t.deleteData.gallery[e].galleries})}))}}},it=st,nt=e("cb32"),rt=e("de5e"),ct=e("9989"),ut=Object(d["a"])(it,o,l,!1,null,null,null);a["default"]=ut.exports;p()(ut,"components",{QList:v["a"],QItemLabel:q["a"],QItem:C["a"],QItemSection:w["a"],QAvatar:nt["a"],QBtn:h["a"],QSeparator:et["a"],QPageSticky:rt["a"],QPage:ct["a"],QDialog:g["a"],QCard:f["a"],QCardSection:b["a"],QCardActions:y["a"]}),p()(ut,"directives",{ClosePopup:x["a"]})}}]);